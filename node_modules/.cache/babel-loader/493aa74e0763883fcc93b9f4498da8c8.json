{"ast":null,"code":"var _jsxFileName = \"/Users/ajayjarhad/Desktop/Work/canonic-samples/Marketplace-App/src/components/header/Header.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport { AppBar, Box, Toolbar, IconButton, Typography, Menu, Container, Avatar, Button, Tooltip, MenuItem, CircularProgress } from \"@mui/material\";\nimport GoogleIcon from \"@mui/icons-material/Google\";\nimport { LOGIN_WITH_GOOGLE, LOGIN_WITH_GOOGLE_MUTATION } from \"../../gql/query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Header(_ref) {\n  _s();\n\n  var _data$getLoginUrlsFor, _isLoggedIn$avatar;\n\n  let {\n    setIsLoggedIn,\n    isLoggedIn\n  } = _ref;\n  const [accessToken, setAccessToken] = useState();\n  const {\n    data,\n    loading: loginDataLoading\n  } = useQuery(LOGIN_WITH_GOOGLE);\n  const [loginMutation, {\n    data: mutationData\n  }] = useMutation(LOGIN_WITH_GOOGLE_MUTATION);\n  useEffect(() => {\n    const urlCode = new URLSearchParams(window.location.search).get(\"code\");\n\n    if (urlCode) {\n      loginMutation({\n        variables: {\n          code: urlCode,\n          service: \"GOOGLE\"\n        }\n      });\n    }\n  }, [loginMutation]);\n  useEffect(() => {\n    var _mutationData$loginFo, _mutationData$loginFo2;\n\n    setAccessToken(mutationData === null || mutationData === void 0 ? void 0 : (_mutationData$loginFo = mutationData.loginForLogin) === null || _mutationData$loginFo === void 0 ? void 0 : _mutationData$loginFo.token);\n    setIsLoggedIn(mutationData === null || mutationData === void 0 ? void 0 : (_mutationData$loginFo2 = mutationData.loginForLogin) === null || _mutationData$loginFo2 === void 0 ? void 0 : _mutationData$loginFo2.user);\n    if (accessToken) localStorage.setItem(\"_id\", accessToken);\n  }, [accessToken, mutationData, setIsLoggedIn]);\n  console.log(isLoggedIn);\n  const [anchorElNav, setAnchorElNav] = React.useState(null);\n  const [anchorElUser, setAnchorElUser] = React.useState(null);\n  const handleOpenUserMenu = useCallback(event => {\n    setAnchorElUser(event.currentTarget);\n  });\n  const handleCloseNavMenu = useCallback(() => {\n    setAnchorElNav(null);\n  });\n  const handleCloseUserMenu = useCallback(() => {\n    setAnchorElUser(null);\n  });\n  const onLogout = useCallback(() => {\n    localStorage.removeItem(\"_id\");\n  });\n  return /*#__PURE__*/_jsxDEV(AppBar, {\n    position: \"static\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"xl\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        disableGutters: true,\n        sx: {\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          noWrap: true,\n          component: \"div\",\n          sx: {\n            mr: 2,\n            display: {\n              xs: \"none\",\n              md: \"flex\"\n            }\n          },\n          children: \"Marketplace\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexGrow: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Account\",\n            children: loginDataLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              color: \"secondary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this) : !isLoggedIn && !localStorage.getItem(\"_id\") ? /*#__PURE__*/_jsxDEV(\"a\", {\n              href: data === null || data === void 0 ? void 0 : (_data$getLoginUrlsFor = data.getLoginUrlsForLogin) === null || _data$getLoginUrlsFor === void 0 ? void 0 : _data$getLoginUrlsFor.GOOGLE,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                startIcon: /*#__PURE__*/_jsxDEV(GoogleIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 58\n                }, this),\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  sx: {\n                    textDecoration: \"none\"\n                  },\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(IconButton, {\n              onClick: handleOpenUserMenu,\n              sx: {\n                p: 0\n              },\n              children: isLoggedIn !== null && isLoggedIn !== void 0 && (_isLoggedIn$avatar = isLoggedIn.avatar) !== null && _isLoggedIn$avatar !== void 0 && _isLoggedIn$avatar.url ? /*#__PURE__*/_jsxDEV(Avatar, {\n                alt: \"User\",\n                src: isLoggedIn.avatar.url\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n                src: \"/broken-image.jpg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Menu, {\n            sx: {\n              mt: \"45px\"\n            },\n            id: \"menu-appbar\",\n            anchorEl: anchorElUser,\n            anchorOrigin: {\n              vertical: \"top\",\n              horizontal: \"right\"\n            },\n            keepMounted: true,\n            transformOrigin: {\n              vertical: \"top\",\n              horizontal: \"right\"\n            },\n            open: Boolean(anchorElUser),\n            onClose: handleCloseUserMenu,\n            children: /*#__PURE__*/_jsxDEV(MenuItem, {\n              onClick: handleCloseNavMenu,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                textAlign: \"center\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  onClick: onLogout,\n                  href: `https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=${window.origin}`,\n                  children: \"Logout\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Header, \"jGcvOujzHZROKWd0fKEZLdPxlk8=\", false, function () {\n  return [useQuery, useMutation];\n});\n\n_c = Header;\nexport default Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["/Users/ajayjarhad/Desktop/Work/canonic-samples/Marketplace-App/src/components/header/Header.js"],"names":["React","useEffect","useState","useCallback","useQuery","useMutation","AppBar","Box","Toolbar","IconButton","Typography","Menu","Container","Avatar","Button","Tooltip","MenuItem","CircularProgress","GoogleIcon","LOGIN_WITH_GOOGLE","LOGIN_WITH_GOOGLE_MUTATION","Header","setIsLoggedIn","isLoggedIn","accessToken","setAccessToken","data","loading","loginDataLoading","loginMutation","mutationData","urlCode","URLSearchParams","window","location","search","get","variables","code","service","loginForLogin","token","user","localStorage","setItem","console","log","anchorElNav","setAnchorElNav","anchorElUser","setAnchorElUser","handleOpenUserMenu","event","currentTarget","handleCloseNavMenu","handleCloseUserMenu","onLogout","removeItem","justifyContent","mr","display","xs","md","flexGrow","getItem","getLoginUrlsForLogin","GOOGLE","textDecoration","p","avatar","url","mt","vertical","horizontal","Boolean","origin"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport {\n  AppBar,\n  Box,\n  Toolbar,\n  IconButton,\n  Typography,\n  Menu,\n  Container,\n  Avatar,\n  Button,\n  Tooltip,\n  MenuItem,\n  CircularProgress,\n} from \"@mui/material\";\nimport GoogleIcon from \"@mui/icons-material/Google\";\n\nimport { LOGIN_WITH_GOOGLE, LOGIN_WITH_GOOGLE_MUTATION } from \"../../gql/query\";\n\nfunction Header({ setIsLoggedIn, isLoggedIn }) {\n  const [accessToken, setAccessToken] = useState();\n  const { data, loading: loginDataLoading } = useQuery(LOGIN_WITH_GOOGLE);\n  const [loginMutation, { data: mutationData }] = useMutation(\n    LOGIN_WITH_GOOGLE_MUTATION\n  );\n  useEffect(() => {\n    const urlCode = new URLSearchParams(window.location.search).get(\"code\");\n    if (urlCode) {\n      loginMutation({ variables: { code: urlCode, service: \"GOOGLE\" } });\n    }\n  }, [loginMutation]);\n  useEffect(() => {\n    setAccessToken(mutationData?.loginForLogin?.token);\n    setIsLoggedIn(mutationData?.loginForLogin?.user);\n    if (accessToken) localStorage.setItem(\"_id\", accessToken);\n  }, [accessToken, mutationData, setIsLoggedIn]);\n\n  console.log(isLoggedIn);\n\n  const [anchorElNav, setAnchorElNav] = React.useState(null);\n  const [anchorElUser, setAnchorElUser] = React.useState(null);\n\n  const handleOpenUserMenu = useCallback((event) => {\n    setAnchorElUser(event.currentTarget);\n  });\n\n  const handleCloseNavMenu = useCallback(() => {\n    setAnchorElNav(null);\n  });\n\n  const handleCloseUserMenu = useCallback(() => {\n    setAnchorElUser(null);\n  });\n\n  const onLogout = useCallback(() => {\n    localStorage.removeItem(\"_id\");\n  });\n\n  return (\n    <AppBar position=\"static\">\n      <Container maxWidth=\"xl\">\n        <Toolbar disableGutters sx={{ justifyContent: \"space-between\" }}>\n          <Typography\n            variant=\"h6\"\n            noWrap\n            component=\"div\"\n            sx={{ mr: 2, display: { xs: \"none\", md: \"flex\" } }}\n          >\n            Marketplace\n          </Typography>\n\n          <Box sx={{ flexGrow: 0 }}>\n            <Tooltip title=\"Account\">\n              {}\n              {loginDataLoading ? (\n                <CircularProgress color=\"secondary\" />\n              ) : !isLoggedIn && !localStorage.getItem(\"_id\") ? (\n                <a href={data?.getLoginUrlsForLogin?.GOOGLE}>\n                  <Button variant=\"contained\" startIcon={<GoogleIcon />}>\n                    <span sx={{ textDecoration: \"none\" }}>Login</span>\n                  </Button>\n                </a>\n              ) : (\n                <IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>\n                  {isLoggedIn?.avatar?.url ? (\n                    <Avatar alt=\"User\" src={isLoggedIn.avatar.url} />\n                  ) : (\n                    <Avatar src=\"/broken-image.jpg\" />\n                  )}\n                </IconButton>\n              )}\n            </Tooltip>\n            <Menu\n              sx={{ mt: \"45px\" }}\n              id=\"menu-appbar\"\n              anchorEl={anchorElUser}\n              anchorOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              keepMounted\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              open={Boolean(anchorElUser)}\n              onClose={handleCloseUserMenu}\n            >\n              <MenuItem onClick={handleCloseNavMenu}>\n                <Typography textAlign=\"center\">\n                  <a\n                    onClick={onLogout}\n                    href={`https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=${window.origin}`}\n                  >\n                    Logout\n                  </a>\n                </Typography>\n              </MenuItem>\n            </Menu>\n          </Box>\n        </Toolbar>\n      </Container>\n    </AppBar>\n  );\n}\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}